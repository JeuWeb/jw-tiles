!function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function s(t){t.forEach(e)}function i(t){return"function"==typeof t}function l(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function o(t,e){t.appendChild(e)}function r(t,e,n){t.insertBefore(e,n||null)}function c(t){t.parentNode.removeChild(t)}function a(t){return document.createElement(t)}function u(t){return document.createTextNode(t)}function f(){return u(" ")}function h(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function d(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function p(t,e,n,s){t.style.setProperty(e,n,s?"important":"")}let g;function m(t){g=t}const v=[],w=[],y=[],$=[],b=Promise.resolve();let x=!1;function j(t){y.push(t)}let k=!1;const _=new Set;function M(){if(!k){k=!0;do{for(let t=0;t<v.length;t+=1){const e=v[t];m(e),E(e.$$)}for(v.length=0;w.length;)w.pop()();for(let t=0;t<y.length;t+=1){const e=y[t];_.has(e)||(_.add(e),e())}y.length=0}while(v.length);for(;$.length;)$.pop()();x=!1,k=!1,_.clear()}}function E(t){if(null!==t.fragment){t.update(),s(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(j)}}const S=new Set;function N(t,e){t&&t.i&&(S.delete(t),t.i(e))}function L(t,e){t.d(1),e.delete(t.key)}function T(t,e){-1===t.$$.dirty[0]&&(v.push(t),x||(x=!0,b.then(M)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function A(l,o,r,a,u,f,h=[-1]){const d=g;m(l);const p=o.props||{},v=l.$$={fragment:null,ctx:null,props:f,update:t,not_equal:u,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(d?d.$$.context:[]),callbacks:n(),dirty:h};let w=!1;if(v.ctx=r?r(l,p,(t,e,...n)=>{const s=n.length?n[0]:e;return v.ctx&&u(v.ctx[t],v.ctx[t]=s)&&(v.bound[t]&&v.bound[t](s),w&&T(l,t)),e}):[],v.update(),w=!0,s(v.before_update),v.fragment=!!a&&a(v.ctx),o.target){if(o.hydrate){const t=function(t){return Array.from(t.childNodes)}(o.target);v.fragment&&v.fragment.l(t),t.forEach(c)}else v.fragment&&v.fragment.c();o.intro&&N(l.$$.fragment),function(t,n,l){const{fragment:o,on_mount:r,on_destroy:c,after_update:a}=t.$$;o&&o.m(n,l),j(()=>{const n=r.map(e).filter(i);c?c.push(...n):s(n),t.$$.on_mount=[]}),a.forEach(j)}(l,o.target,o.anchor),M()}m(d)}function B(t,e,n){const s=t.slice();return s[9]=e[n],s}function C(t,e){let n,s,i,l,g,m,v,w,y,$,b,x=e[9].name+"";function j(...t){return e[8](e[9],...t)}return{key:t,first:null,c(){n=a("a"),s=a("div"),i=a("img"),m=f(),v=a("div"),w=u(x),y=f(),i.src!==(l=e[9].image)&&d(i,"src",l),d(i,"alt",g=e[9].name),p(i,"object-fit",e[9].fit),d(i,"class","svelte-hn3963"),d(v,"class","jw-tiles-game-title svelte-hn3963"),d(s,"class","jw-tiles-ratio svelte-hn3963"),d(n,"class","jw-tiles-tile svelte-hn3963"),d(n,"href",$=e[9].url),this.first=n},m(t,e,l){r(t,n,e),o(n,s),o(s,i),o(s,m),o(s,v),o(v,w),o(n,y),l&&b(),b=h(i,"error",j)},p(t,s){e=t,1&s&&i.src!==(l=e[9].image)&&d(i,"src",l),1&s&&g!==(g=e[9].name)&&d(i,"alt",g),1&s&&p(i,"object-fit",e[9].fit),1&s&&x!==(x=e[9].name+"")&&function(t,e){e=""+e,t.data!==e&&(t.data=e)}(w,x),1&s&&$!==($=e[9].url)&&d(n,"href",$)},d(t){t&&c(n),b()}}}function H(t){let e,n;return{c(){e=a("img"),d(e,"class","jw-tiles-hidden svelte-hn3963"),e.src!==(n=t[1].image)&&d(e,"src",n),d(e,"alt","preloading")},m(t,n){r(t,e,n)},p(t,s){2&s&&e.src!==(n=t[1].image)&&d(e,"src",n)},d(t){t&&c(e)}}}function O(t){let e,n;return{c(){e=a("img"),d(e,"class","jw-tiles-hidden svelte-hn3963"),e.src!==(n=t[2].image)&&d(e,"src",n),d(e,"alt","preloading")},m(t,n){r(t,e,n)},p(t,s){4&s&&e.src!==(n=t[2].image)&&d(e,"src",n)},d(t){t&&c(e)}}}function z(e){let n,i,l,u,p,g,m,v,w,y,$,b,x=[],j=new Map,k=e[0];const _=t=>t[9].id;for(let t=0;t<k.length;t+=1){let n=B(e,k,t),s=_(n);j.set(s,x[t]=C(s,n))}let M=e[1]&&H(e),E=e[2]&&O(e);return{c(){n=a("div"),i=a("div");for(let t=0;t<x.length;t+=1)x[t].c();l=f(),u=a("div"),u.innerHTML='<span class="svelte-hn3963">◀</span>',p=f(),g=a("div"),g.innerHTML='<span class="svelte-hn3963">▶</span>',m=f(),M&&M.c(),v=f(),E&&E.c(),w=f(),y=a("img"),d(i,"class","jw-tiles-tileset svelte-hn3963"),d(u,"class","jw-tiles-arrow jw-tiles-arrow-left svelte-hn3963"),d(g,"class","jw-tiles-arrow jw-tiles-arrow-right svelte-hn3963"),d(n,"class","jw-tiles-inner svelte-hn3963"),d(y,"class","jw-tiles-hidden svelte-hn3963"),y.src!==($=I)&&d(y,"src",$),d(y,"alt","preloading")},m(t,c,a){r(t,n,c),o(n,i);for(let t=0;t<x.length;t+=1)x[t].m(i,null);o(n,l),o(n,u),o(n,p),o(n,g),r(t,m,c),M&&M.m(t,c),r(t,v,c),E&&E.m(t,c),r(t,w,c),r(t,y,c),a&&s(b),b=[h(u,"click",e[3]),h(g,"click",e[4])]},p(t,[e]){if(33&e){const n=t[0];x=function(t,e,n,s,i,l,o,r,c,a,u,f){let h=t.length,d=l.length,p=h;const g={};for(;p--;)g[t[p].key]=p;const m=[],v=new Map,w=new Map;for(p=d;p--;){const t=f(i,l,p),r=n(t);let c=o.get(r);c?s&&c.p(t,e):(c=a(r,t),c.c()),v.set(r,m[p]=c),r in g&&w.set(r,Math.abs(p-g[r]))}const y=new Set,$=new Set;function b(t){N(t,1),t.m(r,u,o.has(t.key)),o.set(t.key,t),u=t.first,d--}for(;h&&d;){const e=m[d-1],n=t[h-1],s=e.key,i=n.key;e===n?(u=e.first,h--,d--):v.has(i)?!o.has(s)||y.has(s)?b(e):$.has(i)?h--:w.get(s)>w.get(i)?($.add(s),b(e)):(y.add(i),h--):(c(n,o),h--)}for(;h--;){const e=t[h];v.has(e.key)||c(e,o)}for(;d;)b(m[d-1]);return m}(x,e,_,1,t,n,j,i,L,C,null,B)}t[1]?M?M.p(t,e):(M=H(t),M.c(),M.m(v.parentNode,v)):M&&(M.d(1),M=null),t[2]?E?E.p(t,e):(E=O(t),E.c(),E.m(w.parentNode,w)):E&&(E.d(1),E=null)},i:t,o:t,d(t){t&&c(n);for(let t=0;t<x.length;t+=1)x[t].d();t&&c(m),M&&M.d(t),t&&c(v),E&&E.d(t),t&&c(w),t&&c(y),s(b)}}}const I="//jeuweb.org/jscripts/jeuweb/no-game-image.png";function q(t,e,n){let{tileset:s=[]}=e,i=s.slice();function l(t,e){e.image!==I&&(e.fit="contain",e.image=I,n(7,i))}!function(t){for(var e,n,s=t.length;0!==s;)n=Math.floor(Math.random()*s),e=t[s-=1],t[s]=t[n],t[n]=e}(i);let o,r,c;return t.$set=t=>{"tileset"in t&&n(6,s=t.tileset)},t.$$.update=()=>{128&t.$$.dirty&&n(0,o=i.slice(0,4)),128&t.$$.dirty&&n(1,r=i[4]),128&t.$$.dirty&&n(2,c=i[i.length-1])},[o,r,c,function(){i.splice(0,0,i.pop()),n(7,i),console.log("shuffled.length",i.length)},function(){i.push(i.shift()),n(7,i),console.log("shuffled.length",i.length)},l,s,i,(t,e)=>l(0,t)]}class P extends class{$destroy(){!function(t,e){const n=t.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}{constructor(t){var e;super(),document.getElementById("svelte-hn3963-style")||((e=a("style")).id="svelte-hn3963-style",e.textContent=".jw-tiles-inner.svelte-hn3963.svelte-hn3963{position:relative;box-sizing:border-box;font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen-Sans, Ubuntu, Cantarell, 'Helvetica Neue',\n      sans-serif}.jw-tiles-tileset.svelte-hn3963.svelte-hn3963{display:flex;justify-content:space-between;align-items:stretch}.jw-tiles-tile.svelte-hn3963.svelte-hn3963{width:calc(25% - 9px);text-decoration:none}.jw-tiles-ratio.svelte-hn3963.svelte-hn3963{position:relative;width:100%;height:0;padding-bottom:calc(62.5% + 30px)}img.svelte-hn3963.svelte-hn3963{position:absolute;display:block;height:calc(100% - 30px);width:100%;height:calc(100% - 30px)}.jw-tiles-game-title.svelte-hn3963.svelte-hn3963{position:absolute;bottom:0;height:31px;background:#2c2c2c;color:#fff;padding:0 8px;width:calc(100% - 2 * 8px);font-size:14px;line-height:calc(2 * 14px);text-align:right}.jw-tiles-arrow.svelte-hn3963.svelte-hn3963{border-radius:50%;position:absolute;top:50%;height:3em;width:3em;line-height:3em;margin-top:-1.5em;user-select:none;text-align:center;background:rgba(0, 0, 0, 0.75);color:#999;cursor:pointer}.jw-tiles-arrow.svelte-hn3963 span.svelte-hn3963{font-size:21px}.jw-tiles-arrow-left.svelte-hn3963.svelte-hn3963{left:5px}.jw-tiles-arrow-left.svelte-hn3963 span.svelte-hn3963{margin-right:4px}.jw-tiles-arrow-right.svelte-hn3963.svelte-hn3963{right:5px}.jw-tiles-arrow-right.svelte-hn3963 span.svelte-hn3963{margin-left:4px}.jw-tiles-hidden.svelte-hn3963.svelte-hn3963{display:none}",o(document.head,e)),A(this,t,q,z,l,{tileset:6})}}function R(t){const{name:e,url:n,image:s,description:i,id:l}=t;return{name:e,url:n,image:s,description:i,id:l,fit:"cover"}}var U;U=function(t){new P({target:document.getElementById("jw-tiles"),props:{tileset:t}})},function t(e,n,s){return(s=new XMLHttpRequest).open("GET",e),e=[],t.timeout&&(s.timeout=t.timeout),s.ontimeout=function(t){n=t},s.onreadystatechange=s.then=function(t,i,l,o){if(t&&t.call&&(e=[,t,i]),n&&e[2]&&e[2](n,s),4==s.readyState&&(l=e[0|s.status/200])){try{o=JSON.parse(s.responseText)}catch(t){o=null}l(o,s)}},s.send(),s}("//jeuweb.org/our-games.json").then(t=>U(function({data:t}){return t.map(R)}(t)))}();
