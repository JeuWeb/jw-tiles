!function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function s(e){e.forEach(t)}function l(e){return"function"==typeof e}function o(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function i(e,t){e.appendChild(t)}function r(e,t,n){e.insertBefore(t,n||null)}function c(e){e.parentNode.removeChild(e)}function a(e){return document.createElement(e)}function u(e){return document.createTextNode(e)}function f(){return u(" ")}function d(e,t,n,s){return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n,s)}function w(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function p(e,t,n,s){e.style.setProperty(t,n,s?"important":"")}let g;function h(e){g=e}const m=[],v=[],y=[],b=[],x=Promise.resolve();let j=!1;function $(e){y.push(e)}let k=!1;const _=new Set;function M(){if(!k){k=!0;do{for(let e=0;e<m.length;e+=1){const t=m[e];h(t),E(t.$$)}for(m.length=0;v.length;)v.pop()();for(let e=0;e<y.length;e+=1){const t=y[e];_.has(t)||(_.add(t),t())}y.length=0}while(m.length);for(;b.length;)b.pop()();j=!1,k=!1,_.clear()}}function E(e){if(null!==e.fragment){e.update(),s(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach($)}}const S=new Set;function N(e,t){e&&e.i&&(S.delete(e),e.i(t))}function L(e,t){e.d(1),t.delete(e.key)}function T(e,t){-1===e.$$.dirty[0]&&(m.push(e),j||(j=!0,x.then(M)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function A(o,i,r,a,u,f,d=[-1]){const w=g;h(o);const p=i.props||{},m=o.$$={fragment:null,ctx:null,props:f,update:e,not_equal:u,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(w?w.$$.context:[]),callbacks:n(),dirty:d};let v=!1;if(m.ctx=r?r(o,p,(e,t,...n)=>{const s=n.length?n[0]:t;return m.ctx&&u(m.ctx[e],m.ctx[e]=s)&&(m.bound[e]&&m.bound[e](s),v&&T(o,e)),t}):[],m.update(),v=!0,s(m.before_update),m.fragment=!!a&&a(m.ctx),i.target){if(i.hydrate){const e=function(e){return Array.from(e.childNodes)}(i.target);m.fragment&&m.fragment.l(e),e.forEach(c)}else m.fragment&&m.fragment.c();i.intro&&N(o.$$.fragment),function(e,n,o){const{fragment:i,on_mount:r,on_destroy:c,after_update:a}=e.$$;i&&i.m(n,o),$(()=>{const n=r.map(t).filter(l);c?c.push(...n):s(n),e.$$.on_mount=[]}),a.forEach($)}(o,i.target,i.anchor),M()}h(w)}function B(e,t,n){const s=e.slice();return s[9]=t[n],s}function C(e,t){let n,s,l,o,g,h,m,v,y,b,x,j=t[9].name+"";function $(...e){return t[8](t[9],...e)}return{key:e,first:null,c(){n=a("a"),s=a("div"),l=a("img"),h=f(),m=a("div"),v=u(j),y=f(),l.src!==(o=t[9].image)&&w(l,"src",o),w(l,"alt",g=t[9].name),p(l,"object-fit",t[9].fit),w(l,"class","svelte-cwos5l"),w(m,"class","jw-tiles-game-title svelte-cwos5l"),w(s,"class","jw-tiles-ratio svelte-cwos5l"),w(n,"class","jw-tiles-tile svelte-cwos5l"),w(n,"href",b=t[9].url),this.first=n},m(e,t,o){r(e,n,t),i(n,s),i(s,l),i(s,h),i(s,m),i(m,v),i(n,y),o&&x(),x=d(l,"error",$)},p(e,s){t=e,1&s&&l.src!==(o=t[9].image)&&w(l,"src",o),1&s&&g!==(g=t[9].name)&&w(l,"alt",g),1&s&&p(l,"object-fit",t[9].fit),1&s&&j!==(j=t[9].name+"")&&function(e,t){t=""+t,e.data!==t&&(e.data=t)}(v,j),1&s&&b!==(b=t[9].url)&&w(n,"href",b)},d(e){e&&c(n),x()}}}function H(e){let t,n;return{c(){t=a("img"),w(t,"class","jw-tiles-hidden svelte-cwos5l"),t.src!==(n=e[1].image)&&w(t,"src",n),w(t,"alt","preloading")},m(e,n){r(e,t,n)},p(e,s){2&s&&t.src!==(n=e[1].image)&&w(t,"src",n)},d(e){e&&c(t)}}}function O(e){let t,n;return{c(){t=a("img"),w(t,"class","jw-tiles-hidden svelte-cwos5l"),t.src!==(n=e[2].image)&&w(t,"src",n),w(t,"alt","preloading")},m(e,n){r(e,t,n)},p(e,s){4&s&&t.src!==(n=e[2].image)&&w(t,"src",n)},d(e){e&&c(t)}}}function z(t){let n,l,o,u,p,g,h,m,v,y,b,x,j=[],$=new Map,k=t[0];const _=e=>e[9].id;for(let e=0;e<k.length;e+=1){let n=B(t,k,e),s=_(n);$.set(s,j[e]=C(s,n))}let M=t[1]&&H(t),E=t[2]&&O(t);return{c(){n=a("div"),l=a("div");for(let e=0;e<j.length;e+=1)j[e].c();o=f(),u=a("div"),u.innerHTML='<span class="svelte-cwos5l">◀</span>',p=f(),g=a("div"),g.innerHTML='<span class="svelte-cwos5l">▶</span>',h=f(),M&&M.c(),m=f(),E&&E.c(),v=f(),y=a("img"),w(l,"class","jw-tiles-tileset svelte-cwos5l"),w(u,"class","jw-tiles-arrow jw-tiles-arrow-left svelte-cwos5l"),w(g,"class","jw-tiles-arrow jw-tiles-arrow-right svelte-cwos5l"),w(n,"class","jw-tiles-inner svelte-cwos5l"),w(y,"class","jw-tiles-hidden svelte-cwos5l"),y.src!==(b=I)&&w(y,"src",b),w(y,"alt","preloading")},m(e,c,a){r(e,n,c),i(n,l);for(let e=0;e<j.length;e+=1)j[e].m(l,null);i(n,o),i(n,u),i(n,p),i(n,g),r(e,h,c),M&&M.m(e,c),r(e,m,c),E&&E.m(e,c),r(e,v,c),r(e,y,c),a&&s(x),x=[d(u,"click",t[3]),d(g,"click",t[4])]},p(e,[t]){if(33&t){const n=e[0];j=function(e,t,n,s,l,o,i,r,c,a,u,f){let d=e.length,w=o.length,p=d;const g={};for(;p--;)g[e[p].key]=p;const h=[],m=new Map,v=new Map;for(p=w;p--;){const e=f(l,o,p),r=n(e);let c=i.get(r);c?s&&c.p(e,t):(c=a(r,e),c.c()),m.set(r,h[p]=c),r in g&&v.set(r,Math.abs(p-g[r]))}const y=new Set,b=new Set;function x(e){N(e,1),e.m(r,u,i.has(e.key)),i.set(e.key,e),u=e.first,w--}for(;d&&w;){const t=h[w-1],n=e[d-1],s=t.key,l=n.key;t===n?(u=t.first,d--,w--):m.has(l)?!i.has(s)||y.has(s)?x(t):b.has(l)?d--:v.get(s)>v.get(l)?(b.add(s),x(t)):(y.add(l),d--):(c(n,i),d--)}for(;d--;){const t=e[d];m.has(t.key)||c(t,i)}for(;w;)x(h[w-1]);return h}(j,t,_,1,e,n,$,l,L,C,null,B)}e[1]?M?M.p(e,t):(M=H(e),M.c(),M.m(m.parentNode,m)):M&&(M.d(1),M=null),e[2]?E?E.p(e,t):(E=O(e),E.c(),E.m(v.parentNode,v)):E&&(E.d(1),E=null)},i:e,o:e,d(e){e&&c(n);for(let e=0;e<j.length;e+=1)j[e].d();e&&c(h),M&&M.d(e),e&&c(m),E&&E.d(e),e&&c(v),e&&c(y),s(x)}}}const I="//jeuweb.org/jscripts/jeuweb/no-game-image.png";function q(e,t,n){let{tileset:s=[]}=t,l=s.slice();function o(e,t){t.image!==I&&(t.fit="contain",t.image=I,n(7,l))}!function(e){for(var t,n,s=e.length;0!==s;)n=Math.floor(Math.random()*s),t=e[s-=1],e[s]=e[n],e[n]=t}(l);let i,r,c;return e.$set=e=>{"tileset"in e&&n(6,s=e.tileset)},e.$$.update=()=>{128&e.$$.dirty&&n(0,i=l.slice(0,4)),128&e.$$.dirty&&n(1,r=l[4]),128&e.$$.dirty&&n(2,c=l[l.length-1])},[i,r,c,function(){l.splice(0,0,l.pop()),n(7,l),console.log("shuffled.length",l.length)},function(){l.push(l.shift()),n(7,l),console.log("shuffled.length",l.length)},o,s,l,(e,t)=>o(0,e)]}class P extends class{$destroy(){!function(e,t){const n=e.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(){}}{constructor(e){var t;super(),document.getElementById("svelte-cwos5l-style")||((t=a("style")).id="svelte-cwos5l-style",t.textContent=".jw-tiles-inner.svelte-cwos5l.svelte-cwos5l{position:relative;box-sizing:border-box;font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen-Sans, Ubuntu, Cantarell, 'Helvetica Neue',\n      sans-serif}.jw-tiles-tileset.svelte-cwos5l.svelte-cwos5l{display:flex;justify-content:space-between;align-items:stretch}.jw-tiles-tile.svelte-cwos5l.svelte-cwos5l{width:calc(25% - 9px);text-decoration:none;background:rgb(209, 209, 209)}.jw-tiles-ratio.svelte-cwos5l.svelte-cwos5l{position:relative;width:100%;height:0;padding-bottom:calc(62.5% + 30px)}img.svelte-cwos5l.svelte-cwos5l{position:absolute;display:block;height:calc(100% - 30px);width:100%;height:calc(100% - 30px)}.jw-tiles-game-title.svelte-cwos5l.svelte-cwos5l{position:absolute;bottom:0;height:31px;background:#2c2c2c;color:#fff;padding:0 8px;width:calc(100% - 2 * 8px);font-size:14px;line-height:calc(2 * 14px);text-align:right}.jw-tiles-arrow.svelte-cwos5l.svelte-cwos5l{border-radius:50%;position:absolute;top:50%;height:3em;width:3em;line-height:3em;margin-top:-1.5em;user-select:none;text-align:center;background:rgba(0, 0, 0, 0.75);color:#999;cursor:pointer}.jw-tiles-arrow.svelte-cwos5l span.svelte-cwos5l{font-size:21px}.jw-tiles-arrow-left.svelte-cwos5l.svelte-cwos5l{left:5px}.jw-tiles-arrow-left.svelte-cwos5l span.svelte-cwos5l{margin-right:4px}.jw-tiles-arrow-right.svelte-cwos5l.svelte-cwos5l{right:5px}.jw-tiles-arrow-right.svelte-cwos5l span.svelte-cwos5l{margin-left:4px}.jw-tiles-tile.svelte-cwos5l:first-child div.svelte-cwos5l{border-radius:0 0 0 8px}.jw-tiles-tile.svelte-cwos5l:first-child img.svelte-cwos5l{border-radius:8px 0 0 0}.jw-tiles-tile.svelte-cwos5l:last-child>div.svelte-cwos5l{border-radius:0 0 8px 0}.jw-tiles-tile.svelte-cwos5l:last-child img.svelte-cwos5l{border-radius:0 8px 0 0}.jw-tiles-hidden.svelte-cwos5l.svelte-cwos5l{display:none}",i(document.head,t)),A(this,e,q,z,o,{tileset:6})}}function R(e){const{name:t,url:n,image:s,description:l,id:o}=e;return{name:t,url:n,image:s,description:l,id:o,fit:"cover"}}var U;U=function(e){new P({target:document.getElementById("jw-tiles"),props:{tileset:e}})},function e(t,n,s){return(s=new XMLHttpRequest).open("GET",t),t=[],e.timeout&&(s.timeout=e.timeout),s.ontimeout=function(e){n=e},s.onreadystatechange=s.then=function(e,l,o,i){if(e&&e.call&&(t=[,e,l]),n&&t[2]&&t[2](n,s),4==s.readyState&&(o=t[0|s.status/200])){try{i=JSON.parse(s.responseText)}catch(e){i=null}o(i,s)}},s.send(),s}("//jeuweb.org/our-games.json").then(e=>U(function({data:e}){return e.map(R)}(e)))}();
